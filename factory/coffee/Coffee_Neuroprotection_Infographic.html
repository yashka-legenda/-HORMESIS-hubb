<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–µ –í–ª–∏—è–Ω–∏–µ –ö–æ—Ñ–µ–∏–Ω–∞: –ì–ª—É–±–æ–∫–∏–π –ê–Ω–∞–ª–∏–∑</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Slab:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #181A1B;
            color: #E5DFCA;
        }
        h1, h2, h3, .font-slab {
            font-family: 'Roboto Slab', serif;
            color: #D4AF37;
        }
        .chart-container {
            position: relative;
            margin: auto;
            height: 300px;
            width: 100%;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .hormesis-card {
            background-color: #E5DFCA;
            color: #181A1B;
        }
        .hormesis-block {
            background-color: #242B38;
            color: #E5DFCA;
        }
        .accent-gold {
            color: #D4AF37;
        }
        .accent-burgundy {
            color: #8A1538;
        }
        .flowchart-arrow {
            font-size: 2.5rem;
            line-height: 1;
            color: #D4AF37;
            transform: rotate(90deg);
        }
        @media (min-width: 768px) {
            .flowchart-arrow {
                transform: rotate(0deg);
            }
        }
        /* Custom styles for inputs and buttons */
        .hormesis-input {
            background-color: #F8F8F8;
            border: 2px solid #D4AF37;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            color: #181A1B;
            width: 100%;
        }
        .hormesis-select {
            background-color: #F8F8F8;
            border: 2px solid #D4AF37;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            color: #181A1B;
            width: 100%;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%23D4AF37'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1.5em 1.5em;
        }
        .hormesis-button {
            background-color: #8A1538;
            color: #E5DFCA;
            padding: 1rem 2rem;
            border-radius: 0.5rem;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }
        .hormesis-button:hover {
            background-color: #6C102C;
        }
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #D4AF37;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="antialiased">

    <div class="hormesis-block p-4 text-center">
        <a href="https://t.me/hormesishub" target="_blank" rel="noopener noreferrer" class="inline-flex items-center space-x-3 transition-opacity hover:opacity-80">
            <i class="fa-brands fa-telegram text-3xl accent-gold"></i>
            <span class="text-2xl font-slab accent-gold">HORMESIS HUB</span>
        </a>
    </div>

    <header class="p-8 text-center sticky top-0 z-10 hormesis-block shadow-lg">
        <h1 class="text-4xl md:text-5xl font-bold accent-gold">–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–µ –í–ª–∏—è–Ω–∏–µ –ö–æ—Ñ–µ–∏–Ω–∞</h1>
        <p class="text-lg text-gray-300 mt-2">–ì–ª—É–±–æ–∫–∏–π –ê–Ω–∞–ª–∏–∑ –ü—Å–∏—Ö–æ—Å—Ç–∏–º—É–ª–∏—Ä—É—é—â–µ–≥–æ –≠—Ñ—Ñ–µ–∫—Ç–∞</p>
    </header>

    <main class="container mx-auto p-4 md:p-8">
        <div class="grid grid-cols-1 gap-8">

            <section class="hormesis-card rounded-lg shadow-xl p-6 md:p-8">
                <h2 class="text-3xl font-slab font-bold mb-4 accent-gold">–ú–µ—Ö–∞–Ω–∏–∑–º –î–µ–π—Å—Ç–≤–∏—è: –ù–∞—É–∫–∞ –í–∞—à–µ–π –ë–æ–¥—Ä–æ—Å—Ç–∏</h2>
                <p class="mb-6 text-lg">–ö–æ—Ñ–µ–∏–Ω –±–ª–æ–∫–∏—Ä—É–µ—Ç –∞–¥–µ–Ω–æ–∑–∏–Ω–æ–≤—ã–µ —Ä–µ—Ü–µ–ø—Ç–æ—Ä—ã, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞ —Å–∏–≥–Ω–∞–ª—ã —É—Å—Ç–∞–ª–æ—Å—Ç–∏. –≠—Ç–æ —Å—Ç–∏–º—É–ª–∏—Ä—É–µ—Ç –≤—ã—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –Ω–µ–π—Ä–æ—Ç—Ä–∞–Ω—Å–º–∏—Ç—Ç–µ—Ä–æ–≤ –¥–æ—Ñ–∞–º–∏–Ω–∞ –∏ –Ω–æ—Ä–∞–¥—Ä–µ–Ω–∞–ª–∏–Ω–∞, –ø–æ–≤—ã—à–∞—è –±–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é.</p>
                <div class="flex flex-col md:flex-row items-center justify-around text-center gap-6 mt-6">
                    <div class="flex flex-col items-center">
                        <div class="w-28 h-28 flex items-center justify-center bg-gray-200 rounded-full border-4 border-gray-300 shadow-md"><span class="text-5xl">‚òï</span></div>
                        <h3 class="font-bold mt-3 text-lg text-black">1. –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ</h3>
                    </div>
                    <div class="flowchart-arrow">¬ª</div>
                    <div class="flex flex-col items-center">
                        <div class="w-28 h-28 flex items-center justify-center bg-gray-200 rounded-full border-4 border-gray-300 shadow-md"><span class="text-5xl">üõë</span></div>
                        <h3 class="font-bold mt-3 text-lg text-black">2. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ê–¥–µ–Ω–æ–∑–∏–Ω–∞</h3>
                    </div>
                    <div class="flowchart-arrow">¬ª</div>
                    <div class="flex flex-col items-center">
                        <div class="w-28 h-28 flex items-center justify-center bg-gray-200 rounded-full border-4 border-gray-300 shadow-md"><span class="text-5xl">üß†</span></div>
                        <h3 class="font-bold mt-3 text-lg text-black">3. –í—ã—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –î–æ—Ñ–∞–º–∏–Ω–∞</h3>
                    </div>
                     <div class="flowchart-arrow">¬ª</div>
                    <div class="flex flex-col items-center">
                        <div class="w-28 h-28 flex items-center justify-center bg-gray-200 rounded-full border-4 border-gray-300 shadow-md"><span class="text-5xl">‚ö°</span></div>
                        <h3 class="font-bold mt-3 text-lg text-black">4. –†–µ–∑—É–ª—å—Ç–∞—Ç: –ë–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</h3>
                    </div>
                </div>
            </section>

            <section class="hormesis-card rounded-lg shadow-xl p-6 md:p-8">
                <h2 class="text-3xl font-slab font-bold mb-4 accent-gold">–ö–æ–º–ø—Ä–æ–º–∏—Å—Å: –°–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–æ—Ç–∏–≤ –¢–æ—á–Ω–æ—Å—Ç–∏</h2>
                <p class="mb-6 text-lg">–° —Ä–æ—Å—Ç–æ–º –¥–æ–∑—ã —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–µ–∞–∫—Ü–∏–∏ –ª–∏–Ω–µ–π–Ω–æ —É–ª—É—á—à–∞–µ—Ç—Å—è. –û–¥–Ω–∞–∫–æ —Ç–æ—á–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –ø–∏–∫–∞ –ø—Ä–∏ —É–º–µ—Ä–µ–Ω–Ω—ã—Ö –¥–æ–∑–∞—Ö (~200-300 –º–≥) –∏ –∑–∞—Ç–µ–º –ø–∞–¥–∞–µ—Ç, —á—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∑–∞–∫–æ–Ω –ô–µ—Ä–∫—Å–∞-–î–æ–¥—Å–æ–Ω–∞.</p>
                <div class="chart-container"><canvas id="reactionVsAccuracyChart"></canvas></div>
            </section>

            <section class="hormesis-card rounded-lg shadow-xl p-6 md:p-8">
                <h2 class="text-3xl font-slab font-bold mb-4 accent-gold">–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –î–æ–∑–∞ –¥–ª—è –°–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤</h2>
                <p class="mb-6 text-lg">–î–æ–∑–∞ 3 –º–≥/–∫–≥ –º–∞—Å—Å—ã —Ç–µ–ª–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –±–µ–∑ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤. –ë–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–µ –¥–æ–∑—ã –Ω–µ –ø—Ä–∏–Ω–æ—Å—è—Ç –ø–æ–ª—å–∑—ã –∏ –ø–æ–≤—ã—à–∞—é—Ç —Ä–∏—Å–∫–∏.</p>
                <div class="chart-container"><canvas id="athleteDoseChart"></canvas></div>
            </section>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <section class="hormesis-card rounded-lg shadow-xl p-6 md:p-8">
                    <h2 class="text-3xl font-slab font-bold mb-4 accent-gold">–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ë–∞–ª–∞–Ω—Å</h2>
                    <p class="mb-6 text-lg">–ö–æ—Ñ–µ–∏–Ω ‚Äî –º–æ–¥—É–ª—è—Ç–æ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è. –ù–∏–∑–∫–∏–µ –¥–æ–∑—ã –ø–æ–≤—ã—à–∞—é—Ç –±–æ–¥—Ä–æ—Å—Ç—å, –≤—ã—Å–æ–∫–∏–µ (>400 –º–≥) –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å –∏ –Ω–∞—Ä—É—à–∞—Ç—å —Å–æ–Ω.</p>
                    <div class="chart-container"><canvas id="moodRadarChart"></canvas></div>
                </section>
                <section class="hormesis-card rounded-lg shadow-xl p-6 md:p-8">
                    <h2 class="text-3xl font-slab font-bold mb-4 accent-gold">–†–∏—Å–∫ –¢—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç–∏</h2>
                    <p class="mb-6 text-lg">–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Å–≤—ã—à–µ 400 –º–≥ –∫–æ—Ñ–µ–∏–Ω–∞ –≤ –¥–µ–Ω—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫ —Ä–∞–∑–≤–∏—Ç–∏—è —Ç—Ä–µ–≤–æ–∂–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ –ø–∞–Ω–∏—á–µ—Å–∫–∏—Ö –∞—Ç–∞–∫ —É –ø—Ä–µ–¥—Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã—Ö –ª–∏—Ü.</p>
                    <div class="chart-container"><canvas id="anxietyDonutChart"></canvas></div>
                </section>
            </div>

            <section class="hormesis-card rounded-lg shadow-xl p-6 md:p-8">
                <h2 class="text-3xl font-slab font-bold mb-4 text-center accent-gold">–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –î–æ–∑–∏—Ä–æ–≤–∫–µ</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
                    <div class="border-4 border-gray-400 rounded-lg p-6 text-center">
                        <h3 class="font-bold text-xl text-black">–£–º–µ—Ä–µ–Ω–Ω–∞—è (100-200 –º–≥)</h3>
                        <p class="text-6xl my-4">‚úÖ</p>
                        <p>–û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è –∏ —Ç–æ—á–Ω–æ—Å—Ç–∏, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏.</p>
                    </div>
                    <div class="border-4 border-[#D4AF37] rounded-lg p-6 text-center">
                        <h3 class="font-bold text-xl accent-gold">–ü–æ–≤—ã—à–µ–Ω–Ω–∞—è (200-400 –º–≥)</h3>
                        <p class="text-6xl my-4">‚ö†Ô∏è</p>
                        <p>–†–æ—Å—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–µ–∞–∫—Ü–∏–∏, –Ω–æ —Ç–æ—á–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç –ø–∞–¥–∞—Ç—å. –£–º–µ—Ä–µ–Ω–Ω—ã–π —Ä–∏—Å–∫ —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç–∏.</p>
                    </div>
                    <div class="border-4 border-[#8A1538] rounded-lg p-6 text-center">
                        <h3 class="font-bold text-xl accent-burgundy">–í—ã—Å–æ–∫–∞—è (>400 –º–≥)</h3>
                        <p class="text-6xl my-4">‚ùå</p>
                        <p>–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç–∏, –±–µ—Å—Å–æ–Ω–Ω–∏—Ü—ã. –ö–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–∏–≤–µ–ª–∏—Ä—É—é—Ç—Å—è.</p>
                    </div>
                </div>
            </section>
            
            <section class="hormesis-card rounded-lg shadow-xl p-6 md:p-8">
                <h2 class="text-3xl font-slab font-bold mb-4 accent-gold">–≠—Ç–æ –õ–∏—á–Ω–æ–µ: –†–æ–ª—å –ì–µ–Ω–µ—Ç–∏–∫–∏</h2>
                <p class="text-lg">–í–∞—à–∞ —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –∫–æ—Ñ–µ–∏–Ω —É–Ω–∏–∫–∞–ª—å–Ω–∞. –ì–µ–Ω—ã <span class="font-bold">CYP1A2</span> (—Å–∫–æ—Ä–æ—Å—Ç—å –º–µ—Ç–∞–±–æ–ª–∏–∑–º–∞) –∏ <span class="font-bold">ADORA2A</span> (—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ—Ü–µ–ø—Ç–æ—Ä–æ–≤) –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, —è–≤–ª—è–µ—Ç–µ—Å—å –ª–∏ –≤—ã "–±—ã—Å—Ç—Ä—ã–º" –∏–ª–∏ "–º–µ–¥–ª–µ–Ω–Ω—ã–º" –º–µ—Ç–∞–±–æ–ª–∏–∑–∞—Ç–æ—Ä–æ–º, —á—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã. –ù–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π –¥–æ–∑—ã, –ø–æ–¥—Ö–æ–¥—è—â–µ–π –¥–ª—è –≤—Å–µ—Ö.</p>
            </section>

            <!-- New LLM-powered feature section -->
            <section class="hormesis-card rounded-lg shadow-xl p-6 md:p-8">
                <h2 class="text-3xl font-slab font-bold mb-4 accent-gold">–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ö–æ—Ñ–µ–∏–Ω—É ‚ú®</h2>
                <p class="mb-6 text-lg">–ü–æ–ª—É—á–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –ø–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –¥–æ–∑–∏—Ä–æ–≤–∫–µ –∏ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–µ–º–∞ –∫–æ—Ñ–µ–∏–Ω–∞, —É—á–∏—Ç—ã–≤–∞—è –≤–∞—à–∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. –ü—Ä–æ—Å—Ç–æ –≤–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –Ω–∏–∂–µ –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label for="weight" class="block text-black text-lg font-bold mb-2">–í–∞—à –í–µ—Å (–∫–≥):</label>
                        <input type="number" id="weight" class="hormesis-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 70" min="1" max="300">
                    </div>
                    <div>
                        <label for="sensitivity" class="block text-black text-lg font-bold mb-2">–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ –∫–æ—Ñ–µ–∏–Ω—É:</label>
                        <select id="sensitivity" class="hormesis-select">
                            <option value="–ù–∏–∑–∫–∞—è">–ù–∏–∑–∫–∞—è</option>
                            <option value="–°—Ä–µ–¥–Ω—è—è" selected>–°—Ä–µ–¥–Ω—è—è</option>
                            <option value="–í—ã—Å–æ–∫–∞—è">–í—ã—Å–æ–∫–∞—è</option>
                        </select>
                    </div>
                    <div>
                        <label for="desiredEffect" class="block text-black text-lg font-bold mb-2">–ñ–µ–ª–∞–µ–º—ã–π –≠—Ñ—Ñ–µ–∫—Ç:</label>
                        <select id="desiredEffect" class="hormesis-select">
                            <option value="–ü–æ–≤—ã—à–µ–Ω–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è">–ü–æ–≤—ã—à–µ–Ω–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è</option>
                            <option value="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–æ–¥—Ä–æ—Å—Ç—å">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–æ–¥—Ä–æ—Å—Ç—å</option>
                            <option value="–£–ª—É—á—à–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è">–£–ª—É—á—à–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è</option>
                            <option value="–£–ª—É—á—à–µ–Ω–∏–µ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π">–£–ª—É—á—à–µ–Ω–∏–µ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π</option>
                        </select>
                    </div>
                    <div>
                        <label for="timeOfDay" class="block text-black text-lg font-bold mb-2">–í—Ä–µ–º—è –ø—Ä–∏–µ–º–∞:</label>
                        <select id="timeOfDay" class="hormesis-select">
                            <option value="—É—Ç—Ä–æ–º">–£—Ç—Ä–æ</option>
                            <option value="–¥–Ω–µ–º">–î–µ–Ω—å</option>
                            <option value="–≤–µ—á–µ—Ä–æ–º">–í–µ—á–µ—Ä</option>
                        </select>
                    </div>
                </div>

                <button id="getRecommendationBtn" class="hormesis-button w-full mt-4 flex items-center justify-center space-x-2">
                    <span id="buttonText">–ü–æ–ª—É—á–∏—Ç—å –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é ‚ú®</span>
                    <div id="loadingSpinner" class="loading-spinner hidden"></div>
                </button>

                <div id="recommendationOutput" class="mt-8 p-6 bg-gray-100 rounded-lg shadow-md border-2 border-gray-300 text-black hidden">
                    <h3 class="font-bold text-xl mb-3 accent-gold">–í–∞—à–∞ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</h3>
                    <p id="recommendationText" class="text-lg"></p>
                </div>
                 <div id="errorMessage" class="mt-4 p-4 bg-red-100 text-red-700 rounded-lg hidden">
                    –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.
                </div>
            </section>

        </div>
    </main>

    <footer class="text-center p-8 mt-8 hormesis-block">
        <p class="text-gray-300">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –Ω–∞—É—á–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö –∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π.</p>
        <p class="text-md text-gray-400 mt-4 font-slab">–û—Ç –∞–≤—Ç–æ—Ä–∞ YASHKA LEGEND</p>
    </footer>

    <script>
        const hormesisPalette = {
            mainBg: '#181A1B',
            headlineAccent: '#D4AF37',
            blockBg: '#242B38',
            cardBg: '#E5DFCA',
            dangerAccent: '#8A1538',
            textLight: '#E5DFCA',
            textDark: '#181A1B'
        };

        const chartDefaultOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { 
                    labels: { 
                        color: hormesisPalette.textDark, 
                        font: { family: "'Montserrat', sans-serif", size: 14 } 
                    } 
                },
                tooltip: {
                    callbacks: {
                        title: (tooltipItems) => {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            return Array.isArray(label) ? label.join(' ') : label;
                        }
                    }
                }
            },
            scales: {
                y: { ticks: { color: hormesisPalette.textDark, font: {size: 12} }, grid: { color: 'rgba(0,0,0,0.1)' } },
                x: { ticks: { color: hormesisPalette.textDark, font: {size: 12} }, grid: { display: false } }
            }
        };

        new Chart(document.getElementById('reactionVsAccuracyChart'), {
            type: 'line',
            data: {
                labels: ['0', '100', '200', '300', '400', '500'],
                datasets: [{
                    label: '–°–∫–æ—Ä–æ—Å—Ç—å –†–µ–∞–∫—Ü–∏–∏',
                    data: [350, 320, 300, 285, 275, 270],
                    borderColor: hormesisPalette.headlineAccent,
                    backgroundColor: 'rgba(212, 175, 55, 0.2)',
                    fill: true,
                    yAxisID: 'y'
                }, {
                    label: '–¢–æ—á–Ω–æ—Å—Ç—å',
                    data: [92, 95, 98, 98.5, 97, 95],
                    borderColor: hormesisPalette.dangerAccent,
                    backgroundColor: 'rgba(138, 21, 56, 0.2)',
                    fill: true,
                    yAxisID: 'y1'
                }]
            },
            options: {
                ...chartDefaultOptions,
                interaction: { mode: 'index', intersect: false },
                scales: {
                    x: { ...chartDefaultOptions.scales.x, title: { display: true, text: '–î–æ–∑–∞ –ö–æ—Ñ–µ–∏–Ω–∞ (–º–≥)', color: hormesisPalette.textDark, font: { size: 14 } } },
                    y: { type: 'linear', display: true, position: 'left', title: { display: true, text: '–í—Ä–µ–º—è –†–µ–∞–∫—Ü–∏–∏ (–º—Å)', color: hormesisPalette.textDark, font: { size: 14 } }, ticks: { color: hormesisPalette.textDark } },
                    y1: { type: 'linear', display: true, position: 'right', title: { display: true, text: '–¢–æ—á–Ω–æ—Å—Ç—å (%)', color: hormesisPalette.textDark, font: { size: 14 } }, grid: { drawOnChartArea: false }, ticks: { color: hormesisPalette.textDark } }
                }
            }
        });

        new Chart(document.getElementById('athleteDoseChart'), {
            type: 'bar',
            data: {
                labels: ['–í—Ä–µ–º—è –†–µ–∞–∫—Ü–∏–∏', '–¢–æ—á–Ω–æ—Å—Ç—å –í–Ω–∏–º–∞–Ω–∏—è'],
                datasets: [
                    { label: '3 –º–≥/–∫–≥', data: [8.2, 6.4], backgroundColor: hormesisPalette.headlineAccent, },
                    { label: '6 –º–≥/–∫–≥', data: [7.7, 4.6], backgroundColor: 'rgba(212, 175, 55, 0.7)', },
                    { label: '9 –º–≥/–∫–≥ (–ù–µ—Ç –£–ª—É—á—à–µ–Ω–∏–π)', data: [0, 0], backgroundColor: hormesisPalette.dangerAccent, }
                ]
            },
            options: { ...chartDefaultOptions,
                plugins: { ...chartDefaultOptions.plugins, tooltip: { callbacks: { label: (c) => `${c.dataset.label}: ${c.raw}% —É–ª—É—á—à–µ–Ω–∏—è` } } },
                scales: { x: { ...chartDefaultOptions.scales.x, stacked: true, title: { display: true, text: '–ó–∞–¥–∞—á–∞', color: hormesisPalette.textDark, font: {size: 14} } }, y: { ...chartDefaultOptions.scales.y, stacked: true, title: { display: true, text: '–£–ª—É—á—à–µ–Ω–∏–µ (%)', color: hormesisPalette.textDark, font: {size: 14} } } }
            }
        });

        new Chart(document.getElementById('moodRadarChart'), {
            type: 'radar',
            data: {
                labels: ['–ë–æ–¥—Ä–æ—Å—Ç—å', '–≠–Ω–µ—Ä–≥–∏—è', '–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ', '–¢—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å', '–ö–∞—á–µ—Å—Ç–≤–æ –°–Ω–∞'],
                datasets: [
                    { label: '–ù–∏–∑–∫–∞—è –¥–æ–∑–∞ (<200 –º–≥)', data: [4, 4, 4, 1, 4], borderColor: hormesisPalette.headlineAccent, backgroundColor: 'rgba(212, 175, 55, 0.2)', },
                    { label: '–í—ã—Å–æ–∫–∞—è –¥–æ–∑–∞ (>400 –º–≥)', data: [5, 5, 2, 4, 1], borderColor: hormesisPalette.dangerAccent, backgroundColor: 'rgba(138, 21, 56, 0.2)', }
                ]
            },
            options: { ...chartDefaultOptions,
                scales: {
                    r: {
                        angleLines: { color: 'rgba(0,0,0,0.1)' },
                        grid: { color: 'rgba(0,0,0,0.1)' },
                        pointLabels: { color: hormesisPalette.textDark, font: { size: 14 } },
                        ticks: { display: false, stepSize: 1 },
                        suggestedMin: 0, suggestedMax: 5
                    }
                }
            }
        });

        new Chart(document.getElementById('anxietyDonutChart'), {
            type: 'doughnut',
            data: {
                labels: ['–ü–æ–≤—ã—à–µ–Ω–Ω—ã–π –†–∏—Å–∫', '–ù–∏–∑–∫–∏–π –†–∏—Å–∫'],
                datasets: [{
                    data: [35, 65],
                    backgroundColor: [hormesisPalette.dangerAccent, hormesisPalette.blockBg],
                    borderColor: hormesisPalette.cardBg,
                    borderWidth: 5
                }]
            },
            options: { ...chartDefaultOptions, cutout: '70%',
                plugins: { ...chartDefaultOptions.plugins,
                    legend: { labels: { color: hormesisPalette.textDark, font: { family: "'Montserrat', sans-serif", size: 14 } }, position: 'bottom' }
                }
            }
        });

        // LLM Integration
        document.getElementById('getRecommendationBtn').addEventListener('click', async () => {
            const weight = document.getElementById('weight').value;
            const sensitivity = document.getElementById('sensitivity').value;
            const desiredEffect = document.getElementById('desiredEffect').value;
            const timeOfDay = document.getElementById('timeOfDay').value;
            const recommendationOutput = document.getElementById('recommendationOutput');
            const recommendationText = document.getElementById('recommendationText');
            const loadingSpinner = document.getElementById('loadingSpinner');
            const buttonText = document.getElementById('buttonText');
            const errorMessage = document.getElementById('errorMessage');

            errorMessage.classList.add('hidden'); // Hide any previous error messages

            if (!weight || weight <= 0) {
                errorMessage.textContent = '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–µ—Å.';
                errorMessage.classList.remove('hidden');
                return;
            }

            buttonText.classList.add('hidden');
            loadingSpinner.classList.remove('hidden');
            recommendationOutput.classList.add('hidden'); // Hide previous output

            try {
                const prompt = `–Ø ‚Äî ${weight} –∫–≥. –ú–æ—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ –∫–æ—Ñ–µ–∏–Ω—É ${sensitivity}. –ú–Ω–µ –Ω—É–∂–µ–Ω –∫–æ—Ñ–µ–∏–Ω –¥–ª—è ${desiredEffect} ${timeOfDay}. –£—á–∏—Ç—ã–≤–∞—è –º–æ—é –≥–µ–Ω–µ—Ç–∏–∫—É –∏ –≤–ª–∏—è–Ω–∏–µ –∫–æ—Ñ–µ–∏–Ω–∞ –Ω–∞ –≤–Ω–∏–º–∞–Ω–∏–µ, –ø–∞–º—è—Ç—å, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ, —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–µ–∞–∫—Ü–∏–∏ –∏ —Å–æ–Ω, –∫–∞–∫–æ–≤–∞ –±—É–¥–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –¥–æ–∑–∞ –∫–æ—Ñ–µ–∏–Ω–∞ (–≤ –º–≥) –∏ –ª—É—á—à–µ–µ –≤—Ä–µ–º—è –ø—Ä–∏–µ–º–∞? –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –¥–∞–π –∫—Ä–∞—Ç–∫—É—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é (–¥–æ 50 —Å–ª–æ–≤).`;
                
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                const apiKey = ""; // Canvas will provide this at runtime
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();
                
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    recommendationText.textContent = text;
                    recommendationOutput.classList.remove('hidden');
                } else {
                    errorMessage.textContent = '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é. –ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞.';
                    errorMessage.classList.remove('hidden');
                }

            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ Gemini API:", error);
                errorMessage.textContent = `–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: ${error.message}. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.`;
                errorMessage.classList.remove('hidden');
            } finally {
                loadingSpinner.classList.add('hidden');
                buttonText.classList.remove('hidden');
            }
        });
    </script>

</body>
</html>
